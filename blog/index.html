<!DOCTYPE html>
<html lang="en">
<head>
  <title>Blog | T6970</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
</head>
  
<body>
  <div class="header">
    <h1>T6970.github.io</h1>
    <p class="center">Blog - Newest posts</p>
  </div>
  <div class="card">
    <div class="latest-discussions">Loading... (if posts don't load, then something went wrong)</div>
  </div>


<script>
async function fetchDiscussions() {
  const url =
    'https://api.github.com/repos/T6970/t6970.github.io/discussions/2/comments';
  try {
    const res = await fetch(url, {
      headers: { Accept: 'application/vnd.github.v3+json' },
    });
    const data = await res.json();
    const container = document.getElementById('latest-discussions');

    // Create cards for each comment
    container.innerHTML = data
      .map(
        (d) => `
      <div class="discussion-card">
        <div class="discussion-body">
          ${d.body}
        </div>
        <div class="discussion-header">
          <strong>${d.user.login}</strong> 
          <span class="discussion-date">${new Date(d.created_at).toLocaleString()}</span>
        </div>
      </div>
    `,
      )
      .join('');
  } catch (e) {
    console.error(e);
    document.getElementById('latest-discussions').innerText =
      `Unable to load discussions because ${e.message}.`;
  }
}
fetchDiscussions();
</script>
</body>
